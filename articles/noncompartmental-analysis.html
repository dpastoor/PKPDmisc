<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Noncompartmental Analysis â€¢ PKPDmisc</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- docsearch --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Noncompartmental Analysis">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PKPDmisc</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">2.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/multiplot.html">Multiplots</a>
    </li>
    <li>
      <a href="../articles/noncompartmental-analysis.html">Noncompartmental Analysis</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dpastoor/PKPDmisc">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Noncompartmental Analysis</h1>
                        <h4 class="author">Devin Pastoor</h4>
            
            <h4 class="date">2018-05-15</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/dpastoor/PKPDmisc/blob/master/vignettes/noncompartmental-analysis.Rmd"><code>vignettes/noncompartmental-analysis.Rmd</code></a></small>
      <div class="hidden name"><code>noncompartmental-analysis.Rmd</code></div>

    </div>

    
    
<p>For initial analysis, or in times where more complex analysis - such as nonlinear mixed effects modeling - is unnecessary, noncompartmental analysis is frequently used. While there are R packages, such as <code>metrumrg</code> or <code>PK</code> packages, the functionality is too complex and does not provide the flexibility to easily perform most of the basic functions needed without massaging or wringing your data into the necessary formats. The NCA functions in <code>PKPDmisc</code> are designed to be robust, but generalizable, allowing multiple data designs and software to be easily utilized.</p>
<p>In addition, while it is possible to use these functions in base R, it is highly recommended to use <code>dplyr</code> to supplement much of the surrounding data manipulation for both speed and clarity.</p>
<p>While other resources are available to get started with dplyr, briefly, the general workflow will be as follows:</p>
<ul>
<li>take raw data</li>
<li>filter unnecessary data</li>
<li>group data</li>
<li>use summarize or mutate for the calculations.</li>
</ul>
<p>However, there are certain analyses that are frequently used enough that <code>PKPDmisc</code> provides wrapper functions to reduce the above steps to a single line of code.</p>
<p>For those getting accustomed to R, keep in mind that there is also simple examples provided with each function that are available by doing <code>?&lt;function&gt;</code>, so for example <code><a href="../reference/auc_partial.html">?auc_partial</a></code>.</p>
<p>For the examples, the <code>sd_oral_richpk</code> dataset from <code>PKPDdatasets</code> will be used.</p>
<p>To install, run <code><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">devtools::install_github("dpastoor/PKPDdatasets")</a></code></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(<span class="st">"PKPDmisc"</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">library</span>(<span class="st">"dplyr"</span>)</a></code></pre></div>
<pre><code>## 
## Attaching package: 'dplyr'</code></pre>
<pre><code>## The following objects are masked from 'package:stats':
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">pkdat &lt;-<span class="st"> </span>sd_oral_richpk</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">head</span>(pkdat)</a></code></pre></div>
<pre><code>##   ID Time  Amt      Conc      Age   Weight Gender     Race Dose
## 1  1 0.00 5000  0.000000 56.09591 94.19649   Male Hispanic 5000
## 2  1 0.25    0  8.612809 56.09591 94.19649   Male Hispanic 5000
## 3  1 0.50    0 19.436818 56.09591 94.19649   Male Hispanic 5000
## 4  1 1.00    0 34.006699 56.09591 94.19649   Male Hispanic 5000
## 5  1 2.00    0 30.228800 56.09591 94.19649   Male Hispanic 5000
## 6  1 3.00    0 31.299610 56.09591 94.19649   Male Hispanic 5000</code></pre>
<div id="common-summary-functions" class="section level1">
<h1 class="hasAnchor">
<a href="#common-summary-functions" class="anchor"></a>Common summary functions</h1>
<p>For a number of tasks that are commonly run, summary functions reduce the number of steps necessary. While I will not highlight each here, a quick glance at the package source code can show which functions are available. The API follows that functions named <code>s_&lt;function&gt;</code> will provide these multiple steps at once.</p>
<p>In general, each function is designed to take a <em>grouped dataframe</em> from <code>dplyr</code> to provide the function insight as to how to handle the overall data, so in general the analysis will will look like:</p>
<pre><code>df %&gt;% group_by(&lt;grouping var&gt;) %&gt;% s_&lt;function&gt;()</code></pre>
<p>The first such function is <code><a href="../reference/s_pauc.html">s_pauc()</a></code>. This function can give multiple partial auc values, with each column being named <code>pAUC&lt;tfirst&gt;_&lt;tlast&gt;</code>. Multiple partial AUC slices can be requested by passing a list of requested times.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">pkdat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(ID) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/s_pauc.html">s_pauc</a></span>(Time, Conc, <span class="kw">list</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">8</span>), <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">24</span>), <span class="kw">c</span>(<span class="dv">8</span>, <span class="dv">24</span>))) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="st">  </span>head</a></code></pre></div>
<pre><code>## # A tibble: 6 x 4
## # Groups:   ID [6]
##      ID pAUC0_8 pAUC0_24 pAUC8_24
##   &lt;int&gt;   &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1     1    204.     386.     181.
## 2     2    523.    1203.     680.
## 3     3    316.     466.     150.
## 4     4    564.    1220.     655.
## 5     5    302.     488.     186.
## 6     6    154.     295.     141.</code></pre>
<p>Similar to <code>dplyr</code> and <code>ggplot2</code> the summary functions use non-standard evaluation (no quotes required), however this is not conducive to programming or for use inside of other functions. As such, a standard evaluation version is provided with the nomenclature <code>s_&lt;function&gt;_</code></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">paucs &lt;-<span class="st"> </span>pkdat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(ID) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/s_pauc.html">s_pauc_</a></span>(<span class="st">"Time"</span>, <span class="st">"Conc"</span>, <span class="kw">list</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">8</span>), <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">24</span>), <span class="kw">c</span>(<span class="dv">8</span>, <span class="dv">24</span>)), <span class="dt">digits =</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw">head</span>(paucs)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 4
## # Groups:   ID [6]
##      ID pAUC0_8 pAUC0_24 pAUC8_24
##   &lt;int&gt;   &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1     1    204.     386.     181.
## 2     2    523.    1204.     680.
## 3     3    316.     466.     150.
## 4     4    564.    1220.     656.
## 5     5    302.     488.     186.
## 6     6    154      295.     141.</code></pre>
<p>Often once AUC or cmax statistics have been calculated, quantiles are calculated to create quantile plots or other summary evaluations. Here, the <code>s_quantiles</code> function can be used.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">paucs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/s_quantiles.html">s_quantiles</a></span>(pAUC0_<span class="dv">24</span>, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="dv">1</span>))</a></code></pre></div>
<pre><code>## # A tibble: 1 x 5
##   pAUC0_24_q0 pAUC0_24_q25 pAUC0_24_q50 pAUC0_24_q75 pAUC0_24_q100
##         &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;
## 1        161.         457.         590.         887.         1377.</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">paucs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/s_quantiles.html">s_quantiles_</a></span>(<span class="st">"pAUC0_24"</span>, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="dv">1</span>))</a></code></pre></div>
<pre><code>## # A tibble: 1 x 5
##   pAUC0_24_q0 pAUC0_24_q25 pAUC0_24_q50 pAUC0_24_q75 pAUC0_24_q100
##         &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;
## 1        161.         457.         590.         887.         1377.</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/session_info">session_info</a></span>()</a></code></pre></div>
<pre><code>## Session info -------------------------------------------------------------</code></pre>
<pre><code>##  setting  value                       
##  version  R version 3.4.3 (2017-11-30)
##  system   x86_64, darwin17.4.0        
##  ui       unknown                     
##  language (EN)                        
##  collate  en_US.UTF-8                 
##  tz       America/New_York            
##  date     2018-05-15</code></pre>
<pre><code>## Packages -----------------------------------------------------------------</code></pre>
<pre><code>##  package     * version    date       source                             
##  ansistrings   1.0.0.9000 2018-03-27 Github (r-lib/ansistrings@4e4d309) 
##  assertthat    0.2.0      2017-04-11 CRAN (R 3.4.2)                     
##  backports     1.1.2      2017-12-13 CRAN (R 3.4.2)                     
##  base        * 3.4.3      2018-03-12 local                              
##  bindr         0.1.1      2018-03-13 CRAN (R 3.4.3)                     
##  bindrcpp    * 0.2.2      2018-03-29 CRAN (R 3.4.3)                     
##  cli           1.0.0.9002 2018-03-27 Github (r-lib/cli@53c129a)         
##  commonmark    1.4        2017-09-01 CRAN (R 3.4.2)                     
##  compiler      3.4.3      2018-03-12 local                              
##  crayon        1.3.4      2017-09-16 CRAN (R 3.4.2)                     
##  datasets    * 3.4.3      2018-03-12 local                              
##  desc          1.1.1.9002 2018-02-12 Github (r-lib/desc@9db1377)        
##  devtools      1.13.3     2017-08-02 CRAN (R 3.4.2)                     
##  digest        0.6.15     2018-01-28 CRAN (R 3.4.2)                     
##  dplyr       * 0.7.4      2017-09-28 CRAN (R 3.4.2)                     
##  evaluate      0.10.1     2017-06-24 CRAN (R 3.4.2)                     
##  fs            1.2.2      2018-03-21 CRAN (R 3.4.3)                     
##  glue          1.2.0.9000 2018-03-01 Github (tidyverse/glue@9d96cbf)    
##  graphics    * 3.4.3      2018-03-12 local                              
##  grDevices   * 3.4.3      2018-03-12 local                              
##  hms           0.4.2      2018-03-10 CRAN (R 3.4.3)                     
##  htmltools     0.3.6      2017-04-28 CRAN (R 3.4.2)                     
##  knitr         1.20       2018-02-20 CRAN (R 3.4.2)                     
##  lazyeval      0.2.1      2017-10-29 cran (@0.2.1)                      
##  magrittr      1.5        2014-11-22 CRAN (R 3.4.2)                     
##  MASS          7.3-47     2017-02-26 CRAN (R 3.4.3)                     
##  memoise       1.1.0      2017-10-20 Github (hadley/memoise@d63ae9c)    
##  methods     * 3.4.3      2018-03-12 local                              
##  pillar        1.2.2      2018-04-26 CRAN (R 3.4.3)                     
##  pkgconfig     2.0.1      2017-03-21 CRAN (R 3.4.2)                     
##  pkgdown       1.0.0      2018-05-03 CRAN (R 3.4.3)                     
##  PKPDmisc    * 2.1.1      2017-12-17 CRAN (R 3.4.3)                     
##  prettyunits   1.0.2      2015-07-13 CRAN (R 3.4.2)                     
##  progress      1.1.2.9002 2018-03-27 Github (r-lib/progress@72c9873)    
##  R6            2.2.2      2017-06-17 CRAN (R 3.4.2)                     
##  Rcpp          0.12.16    2018-03-13 CRAN (R 3.4.3)                     
##  rlang         0.2.0      2018-02-20 CRAN (R 3.4.3)                     
##  rmarkdown     1.9        2018-03-01 CRAN (R 3.4.3)                     
##  roxygen2      6.0.1.9000 2018-03-01 Github (klutometis/roxygen@be3ef30)
##  rprojroot     1.3-2      2018-01-03 CRAN (R 3.4.2)                     
##  rstudioapi    0.7        2017-09-07 CRAN (R 3.4.2)                     
##  selectr       0.3-2      2018-03-05 CRAN (R 3.4.3)                     
##  stats       * 3.4.3      2018-03-12 local                              
##  stringi       1.2.2      2018-05-02 CRAN (R 3.4.3)                     
##  stringr       1.3.0      2018-02-19 CRAN (R 3.4.2)                     
##  tibble        1.4.2      2018-01-22 CRAN (R 3.4.2)                     
##  tools         3.4.3      2018-03-12 local                              
##  utf8          1.1.3      2018-01-03 CRAN (R 3.4.2)                     
##  utils       * 3.4.3      2018-03-12 local                              
##  withr         2.1.2      2018-03-15 CRAN (R 3.4.3)                     
##  xml2          1.2.0      2018-01-24 CRAN (R 3.4.2)                     
##  yaml          2.1.16     2017-12-12 CRAN (R 3.4.2)</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#common-summary-functions">Common summary functions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Devin Pastoor.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script>
  docsearch({
    
    
    apiKey: '6417058f1efec10fab175718f9ee85d7',
    indexName: 'pkpdmisc',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
